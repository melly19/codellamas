2026-02-07 16:57:09,Bookstore,Refactor the provided Spring Boot application to eliminate 'Feature Envy' code smells. Ensure that your refactoring preserves existing behavior as verified by JUnit tests.,"[{""path"": ""pom.xml"", ""content"": ""<?xml version=\""1.0\"" encoding=\""UTF-8\""?>\n<project xmlns=\""http://maven.apache.org/POM/4.0.0\""\n         xmlns:xsi=\""http://www.w3.org/2001/XMLSchema-instance\""\n         xsi:schemaLocation=\""http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\"">\n    <modelVersion>4.0.0</modelVersion>\n\n    <groupId>com.example.bookstore</groupId>\n    <artifactId>bookstore</artifactId>\n    <version>1.0-SNAPSHOT</version>\n    <packaging>jar</packaging>\n\n    <name>bookstore</name>\n    <description>A simple bookstore inventory application</description>\n\n    <parent>\n        <groupId>org.springframework.boot</groupId>\n        <artifactId>spring-boot-starter-parent</artifactId>\n        <version>2.6.3</version>\n        <relativePath/> <!-- lookup parent from repository -->\n    </parent>\n\n    <properties>\n        <java.version>11</java.version>\n    </properties>\n\n    <dependencies>\n        <dependency>\n            <groupId>org.springframework.boot</groupId>\n            <artifactId>spring-boot-starter-web</artifactId>\n        </dependency>\n        <dependency>\n            <groupId>org.springframework.boot</groupId>\n            <artifactId>spring-boot-starter-test</artifactId>\n            <scope>test</scope>\n        </dependency>\n    </dependencies>\n\n    <build>\n        <plugins>\n            <plugin>\n                <groupId>org.springframework.boot</groupId>\n                <artifactId>spring-boot-maven-plugin</artifactId>\n            </plugin>\n        </plugins>\n    </build>\n\n</project>""}, {""path"": ""src/main/java/com/example/bookstore/BookstoreApplication.java"", ""content"": ""package com.example.bookstore;\n\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\n\n@SpringBootApplication\npublic class BookstoreApplication {\n    public static void main(String[] args) {\n        SpringApplication.run(BookstoreApplication.class, args);\n    }\n}""}, {""path"": ""src/main/java/com/example/bookstore/controller/BookController.java"", ""content"": ""package com.example.bookstore.controller;\n\nimport com.example.bookstore.Book;\nimport com.example.bookstore.service.BookService;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.web.bind.annotation.*;\n\n@RestController\n@RequestMapping(\""/books\"")\npublic class BookController {\n    private final BookService bookService;\n\n    @Autowired\n    public BookController(BookService bookService) {\n        this.bookService = bookService;\n    }\n\n    @GetMapping\n    public Iterable<Book> getAllBooks() {\n        return bookService.getAllBooks();\n    }\n\n    @PostMapping\n    public Book addBook(@RequestBody Book book) {\n        return bookService.addBook(book);\n    }\n}""}, {""path"": ""src/main/java/com/example/bookstore/service/BookService.java"", ""content"": ""package com.example.bookstore.service;\n\nimport com.example.bookstore.Book;\nimport java.util.ArrayList;\nimport java.util.List;\nimport org.springframework.stereotype.Service;\n\n@Service\npublic class BookService {\n    private final List<Book> books = new ArrayList<>();\n\n    public Iterable<Book> getAllBooks() {\n        return books;\n    }\n\n    public Book addBook(Book book) {\n        books.add(book);\n        return book;\n    }\n}""}, {""path"": ""src/main/java/com/example/bookstore/Book.java"", ""content"": ""package com.example.bookstore;\n\npublic class Book {\n    private String title;\n    private String author;\n    private int quantity;\n\n    public Book() {}\n\n    public Book(String title, String author, int quantity) {\n        this.title = title;\n        this.author = author;\n        this.quantity = quantity;\n    }\n\n    // Getters and setters omitted for brevity\n}""}, {""path"": ""src/main/java/com/example/bookstore/BookDetail.java"", ""content"": ""package com.example.bookstore;\n\npublic class BookDetail {\n    private String title;\n    private int quantity;\n\n    public BookDetail(Book book) {\n        this.title = book.getTitle();\n        this.quantity = book.getQuantity();\n    }\n\n    public void displayDetails() {\n        System.out.println(\""Title: \"" + title);\n        System.out.println(\""Available Quantity: \"" + quantity);\n    }\n}""}]","[{""path"": ""src/test/java/com/example/bookstore/service/BookServiceTest.java"", ""content"": ""package com.example.bookstore.service;\n\nimport com.example.bookstore.Book;\nimport org.junit.jupiter.api.Test;\nimport static org.junit.jupiter.api.Assertions.*;\n\nclass BookServiceTest {\n    private final BookService bookService = new BookService();\n\n    @Test\n    void testAddAndGetBooks() {\n        Book book1 = new Book(\""Effective Java\"", \""Joshua Bloch\"", 10);\n        Book book2 = new Book(\""Clean Code\"", \""Robert C. Martin\"", 5);\n\n        bookService.addBook(book1);\n        bookService.addBook(book2);\n\n        Iterable<Book> books = bookService.getAllBooks();\n        assertEquals(2, books.spliterator().getExactSizeIfKnown());\n    }\n\n    @Test\n    void testEmptyInventory() {\n        Iterable<Book> books = bookService.getAllBooks();\n        assertTrue(books.iterator().hasNext(), \""There should be no books initially.\"");\n    }\n}""}]","```java
package com.example.bookstore;

public class Book {
    private String title;
    private String author;
    private int quantity;

    public Book() {}

    public Book(String title, String author, int quantity) {
        this.title = title;
        this.author = author;
        this.quantity = quantity;
    }

    // Getters and setters omitted for brevity
}

package com.example.bookstore;

public class BookDetail {
    private final String title;
    private final int quantity;

    public BookDetail(Book book) {
        this.title = book.getTitle();
        this.quantity = book.getQuantity();
    }

    public void displayDetails() {
        System.out.println(""Title: "" + title);
        System.out.println(""Available Quantity: "" + quantity);
    }
}
```
### Refactored Solution:
The `BookDetail` class no longer directly accesses the internal data of `Book`. Instead, it uses accessors (getters) to obtain necessary information. This removes the 'Feature Envy' smell by ensuring that each class operates on its own data."
2026-02-07 17:35:18,Banking,"Refactor the 'processTransaction' method in the TransactionService class to improve its readability and maintainability. The method currently suffers from the Long Method code smell by handling too many responsibilities at once. Ensure that all existing behavior is preserved, as demonstrated by passing provided test cases.","[{""path"": ""src/main/java/com/banking/BankAccount.java"", ""content"": ""package com.banking;\n\npublic class BankAccount {\n    private String accountId;\n    private double balance;\n\n    public BankAccount(String accountId, double initialBalance) {\n        this.accountId = accountId;\n        this.balance = initialBalance;\n    }\n\n    public String getAccountId() {\n        return accountId;\n    }\n\n    public double getBalance() {\n        return balance;\n    }\n\n    public void deposit(double amount) {\n        if (amount > 0) {\n            balance += amount;\n        }\n    }\n\n    public boolean withdraw(double amount) {\n        if (amount <= 0 || amount > balance) {\n            return false;\n        }\n        balance -= amount;\n        return true;\n    }\n}""}, {""path"": ""src/main/java/com/banking/TransactionService.java"", ""content"": ""package com.banking;\n\nimport org.springframework.stereotype.Service;\n\n@Service\npublic class TransactionService {\n    public String processTransaction(String fromAccountId, String toAccountId, double amount) {\n        BankAccount fromAccount = new BankAccount(fromAccountId, 1000);\n        BankAccount toAccount = new BankAccount(toAccountId, 500);\n\n        if (amount <= 0 || !fromAccount.withdraw(amount)) {\n            return \""Transaction failed\"";\n        }\n\n        toAccount.deposit(amount);\n\n        // Additional complex logic related to transaction processing\n        String logMessage = fromAccountId + \"" transferred \"" + amount + \"" to \"" + toAccountId;\n        System.out.println(logMessage); // Simulating logging\n        return \""Transaction successful: \"" + logMessage;\n    }\n}""}, {""path"": ""src/main/java/com/banking/TransactionController.java"", ""content"": ""package com.banking;\n\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.web.bind.annotation.*;\n\n@RestController\n@RequestMapping(\""/transactions\"")\npublic class TransactionController {\n    \n    @Autowired\n    private TransactionService transactionService;\n\n    @PostMapping\n    public String processTransaction(@RequestParam String fromAccountId,\n                                      @RequestParam String toAccountId,\n                                      @RequestParam double amount) {\n        return transactionService.processTransaction(fromAccountId, toAccountId, amount);\n    }\n}""}, {""path"": ""src/main/resources/application.properties"", ""content"": """"}, {""path"": ""pom.xml"", ""content"": ""<?xml version=\""1.0\"" encoding=\""UTF-8\""?>\n<project xmlns=\""http://maven.apache.org/POM/4.0.0\""\n         xmlns:xsi=\""http://www.w3.org/2001/XMLSchema-instance\""\n         xsi:schemaLocation=\""http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd\"">\n    <modelVersion>4.0.0</modelVersion>\n    <groupId>com.banking</groupId>\n    <artifactId>banking-project</artifactId>\n    <version>1.0-SNAPSHOT</version>\n    <packaging>jar</packaging>\n\n    <name>banking-project</name>\n    <description>A simple banking project to practice refactoring.</description>\n\n    <parent>\n        <groupId>org.springframework.boot</groupId>\n        <artifactId>spring-boot-starter-parent</artifactId>\n        <version>2.5.4</version>\n        <relativePath/> <!-- lookup parent from repository -->\n    </parent>\n\n    <properties>\n        <java.version>11</java.version>\n    </properties>\n\n    <dependencies>\n        <dependency>\n            <groupId>org.springframework.boot</groupId>\n            <artifactId>spring-boot-starter-web</artifactId>\n        </dependency>\n        <dependency>\n            <groupId>org.springframework.boot</groupId>\n            <artifactId>spring-boot-starter-test</artifactId>\n            <scope>test</scope>\n        </dependency>\n    </dependencies>\n\n    <build>\n        <plugins>\n            <plugin>\n                <groupId>org.springframework.boot</groupId>\n                <artifactId>spring-boot-maven-plugin</artifactId>\n            </plugin>\n        </plugins>\n    </build>\n</project>""}]","[{""path"": ""src/test/java/com/banking/TransactionServiceTest.java"", ""content"": ""package com.banking;\n\nimport org.junit.jupiter.api.Test;\nimport static org.junit.jupiter.api.Assertions.*;\n\nclass TransactionServiceTest {\n\n    @Test\n    void testSuccessfulTransaction() {\n        TransactionService service = new TransactionService();\n        String result = service.processTransaction(\""12345\"", \""67890\"", 100.0);\n        assertTrue(result.contains(\""successful\""));\n    }\n\n    @Test\n    void testFailedTransactionDueToInvalidAmount() {\n        TransactionService service = new TransactionService();\n        String result = service.processTransaction(\""12345\"", \""67890\"", -50.0);\n        assertTrue(result.contains(\""failed\""));\n    }\n\n    @Test\n    void testFailedTransactionDueToInsufficientFunds() {\n        TransactionService service = new TransactionService();\n        String result = service.processTransaction(\""12345\"", \""67890\"", 2000.0);\n        assertTrue(result.contains(\""failed\""));\n    }\n}""}]","```java
package com.banking;

import org.springframework.stereotype.Service;

@Service
public class TransactionService {

    public String processTransaction(String fromAccountId, String toAccountId, double amount) {
        BankAccount fromAccount = new BankAccount(fromAccountId, 1000);
        BankAccount toAccount = new BankAccount(toAccountId, 500);

        if (!isValidAmount(amount)) {
            return ""Transaction failed"";
        }

        if (!canWithdraw(fromAccount, amount)) {
            return ""Transaction failed"";
        }

        transferFunds(fromAccount, toAccount, amount);
        logTransaction(fromAccountId, toAccountId, amount);
        
        return ""Transaction successful"";
    }

    private boolean isValidAmount(double amount) {
        return amount > 0;
    }

    private boolean canWithdraw(BankAccount fromAccount, double amount) {
        return fromAccount.withdraw(amount);
    }

    private void transferFunds(BankAccount fromAccount, BankAccount toAccount, double amount) {
        toAccount.deposit(amount);
    }

    private void logTransaction(String fromAccountId, String toAccountId, double amount) {
        System.out.println(fromAccountId + "" transferred "" + amount + "" to "" + toAccountId);
    }
}
```
"
2026-02-07 19:08:21,Online Shopping,Refactor the ProductService class in an Online Shopping Spring Boot application to address the 'Large Class' code smell by applying Single Responsibility Principle and Clean Code practices. Ensure that existing behavior is preserved using provided JUnit tests.,"[{""path"": ""src/main/java/com/shopping/app/ProductController.java"", ""content"": ""package com.shopping.app;\n\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.web.bind.annotation.*;\n\n@RestController\n@RequestMapping(\""/products\"")\npublic class ProductController {\n\n    @Autowired\n    private ProductService productService;\n\n    @GetMapping\n    public List<Product> getAllProducts() {\n        return productService.getAllProducts();\n    }\n\n    @PostMapping\n    public Product addProduct(@RequestBody Product product) {\n        return productService.addProduct(product);\n    }\n\n    @PutMapping(\""/{id}\"")\n    public Product updateProduct(@PathVariable int id, @RequestBody Product product) {\n        return productService.updateProduct(id, product);\n    }\n\n    @DeleteMapping(\""/{id}\"")\n    public void deleteProduct(@PathVariable int id) {\n        productService.deleteProduct(id);\n    }\n}""}, {""path"": ""src/main/java/com/shopping/app/ProductService.java"", ""content"": ""package com.shopping.app;\n\nimport org.springframework.stereotype.Service;\nimport java.util.ArrayList;\nimport java.util.List;\nimport java.util.Optional;\n\n@Service\nclass ProductService {\n\n    private List<Product> products = new ArrayList<>();\n\n    public List<Product> getAllProducts() {\n        return products;\n    }\n\n    public Product addProduct(Product product) {\n        products.add(product);\n        return product;\n    }\n\n    public Product updateProduct(int id, Product updatedProduct) {\n        for (Product p : products) {\n            if (p.getId() == id) {\n                products.set(products.indexOf(p), updatedProduct);\n                return updatedProduct;\n            }\n        }\n        throw new RuntimeException(\""Product not found!\"");\n    }\n\n    public void deleteProduct(int id) {\n        products.removeIf(p -> p.getId() == id);\n    }\n\n    // Inventory logic \n    public boolean isProductInStock(String name) {\n        return products.stream().anyMatch(p -> p.getName().equals(name) && p.getQuantity() > 0);\n    }\n\n    // Discount calculation logic\n    public double calculateDiscountedPrice(Product product, double discountRate) {\n        if (discountRate < 0 || discountRate > 1) {\n            throw new IllegalArgumentException(\""Invalid discount rate\"");\n        }\n        return product.getPrice() * (1 - discountRate);\n    }\n\n}""}, {""path"": ""src/main/java/com/shopping/app/Product.java"", ""content"": ""package com.shopping.app;\n\npublic class Product {\n\n    private int id;\n    private String name;\n    private double price;\n    private int quantity;\n\n    // Getters and Setters\n}\n""}, {""path"": ""src/main/java/com/shopping/app/pom.xml"", ""content"": ""<?xml version=\""1.0\"" encoding=\""UTF-8\""?>\n<project xmlns=\""http://maven.apache.org/POM/4.0.0\""\n         xmlns:xsi=\""http://www.w3.org/2001/XMLSchema-instance\""\n         xsi:schemaLocation=\""http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\"">\n    <modelVersion>4.0.0</modelVersion>\n\n    <groupId>com.shopping.app</groupId>\n    <artifactId>shopping-app</artifactId>\n    <version>1.0-SNAPSHOT</version>\n    \n    <parent>\n        <groupId>org.springframework.boot</groupId>\n        <artifactId>spring-boot-starter-parent</artifactId>\n        <version>2.5.4</version>\n    </parent>\n\n    <dependencies>\n        <dependency>\n            <groupId>org.springframework.boot</groupId>\n            <artifactId>spring-boot-starter-web</artifactId>\n        </dependency>\n    </dependencies>\n\n    <build>\n        <plugins>\n            <plugin>\n                <groupId>org.springframework.boot</groupId>\n                <artifactId>spring-boot-maven-plugin</artifactId>\n            </plugin>\n        </plugins>\n    </build>\n</project>""}, {""path"": ""src/main/java/com/shopping/app/ShoppingApplication.java"", ""content"": ""package com.shopping.app;\n\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\n\n@SpringBootApplication\npublic class ShoppingApplication {\n\n    public static void main(String[] args) {\n        SpringApplication.run(ShoppingApplication.class, args);\n    }\n}\n""}]","[{""path"": ""src/test/java/com/shopping/app/ProductServiceTest.java"", ""content"": ""package com.shopping.app;\n\nimport org.junit.jupiter.api.Test;\nimport static org.junit.jupiter.api.Assertions.*;\nimport java.util.List;\n\nclass ProductServiceTest {\n\n    private final ProductService productService = new ProductService();\n\n    @Test\n    void testAddAndGetProduct() {\n        Product product = new Product();\n        product.setId(1);\n        product.setName(\""Laptop\"");\n        product.setPrice(1000.0);\n        product.setQuantity(10);\n        productService.addProduct(product);\n\n        List<Product> products = productService.getAllProducts();\n        assertEquals(1, products.size());\n        assertEquals(\""Laptop\"", products.get(0).getName());\n    }\n\n    @Test\n    void testUpdateNonExistentProduct() {\n        Product product = new Product();\n        product.setId(99);\n        product.setName(\""Tablet\"");\n        product.setPrice(500.0);\n        product.setQuantity(5);\n        assertThrows(RuntimeException.class, () -> productService.updateProduct(product.getId(), product));\n    }\n\n    @Test\n    void testDeleteNonExistentProduct() {\n        productService.deleteProduct(999);\n        List<Product> products = productService.getAllProducts();\n        assertTrue(products.isEmpty()); // Assuming no products were added before deletion\n    }\n\n    @Test\n    void testIsProductInStock() {\n        Product product = new Product();\n        product.setId(2);\n        product.setName(\""Phone\"");\n        product.setPrice(700.0);\n        product.setQuantity(0); // Out of stock\n        productService.addProduct(product);\n\n        assertFalse(productService.isProductInStock(\""Phone\""));\n    }\n\n    @Test\n    void testCalculateDiscountedPrice() {\n        Product product = new Product();\n        product.setId(3);\n        product.setName(\""Camera\"");\n        product.setPrice(800.0);\n        productService.addProduct(product);\n\n        double discountedPrice = productService.calculateDiscountedPrice(product, 0.2); // 20% discount\n        assertEquals(640.0, discountedPrice);\n    }\n}\n""}]","```java
package com.shopping.app.inventory;

import java.util.List;
import java.util.Optional;

class InventoryService {

    private List<Product> products;

    public boolean isProductInStock(String name) {
        return products.stream()
            .anyMatch(p -> p.getName().equals(name) && p.getQuantity() > 0);
    }
}
```
```java
package com.shopping.app.discount;

class DiscountService {

    public double calculateDiscountedPrice(Product product, double discountRate) {
        if (discountRate < 0 || discountRate > 1) {
            throw new IllegalArgumentException(""Invalid discount rate"");
        }
        return product.getPrice() * (1 - discountRate);
    }
}
```
```java
package com.shopping.app;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;
import java.util.ArrayList;
import java.util.List;

@Service
class ProductService {

    private final List<Product> products = new ArrayList<>();
    
    @Autowired
    private InventoryService inventoryService;
    
    @Autowired
    private DiscountService discountService;

    public List<Product> getAllProducts() {
        return products;
    }

    public Product addProduct(Product product) {
        products.add(product);
        return product;
    }

    public Product updateProduct(int id, Product updatedProduct) {
        for (Product p : products) {
            if (p.getId() == id) {
                products.set(products.indexOf(p), updatedProduct);
                return updatedProduct;
            }
        }
        throw new RuntimeException(""Product not found!"");
    }

    public void deleteProduct(int id) {
        products.removeIf(p -> p.getId() == id);
    }
}
```
"
2026-02-07 19:16:24,Banking,"You have been provided with a Spring Boot banking application containing a service method with a 'Long Method' code smell. Your task is to refactor this method by breaking it down into smaller, single-responsibility methods without altering the existing behavior. Ensure that all test cases pass after your refactoring.","[{""path"": ""src/main/java/com/example/banking/BankApplication.java"", ""content"": ""package com.example.banking;\n\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\n\n@SpringBootApplication\npublic class BankApplication {\n    public static void main(String[] args) {\n        SpringApplication.run(BankApplication.class, args);\n    }\n}""}, {""path"": ""src/main/java/com/example/banking/controller/AccountController.java"", ""content"": ""package com.example.banking.controller;\n\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.http.ResponseEntity;\nimport org.springframework.web.bind.annotation.*;\nimport com.example.banking.service.AccountService;\n\nclass Account {\n    private String id;\n    private double balance;\n\n    // Constructors, getters and setters\n}\n\n@RestController\n@RequestMapping(\""/accounts\"")\npublic class AccountController {\n    @Autowired\n    private final AccountService accountService;\n\n    public AccountController(AccountService accountService) {\n        this.accountService = accountService;\n    }\n\n    @PostMapping\n    public ResponseEntity<Account> createAccount(@RequestBody Account account) {\n        return ResponseEntity.ok(accountService.createAccount(account));\n    }\n\n    @PutMapping(\""/{id}/deposit\"")\n    public ResponseEntity<Account> deposit(@PathVariable String id, @RequestParam double amount) {\n        return ResponseEntity.ok(accountService.deposit(id, amount));\n    }\n\n    @PutMapping(\""/{id}/withdraw\"")\n    public ResponseEntity<Account> withdraw(@PathVariable String id, @RequestParam double amount) {\n        return ResponseEntity.ok(accountService.withdraw(id, amount));\n    }\n\n    @GetMapping(\""/{id}\"")\n    public ResponseEntity<Account> getAccount(@PathVariable String id) {\n        return ResponseEntity.ok(accountService.getAccountById(id));\n    }\n}""}, {""path"": ""src/main/java/com/example/banking/service/AccountServiceImpl.java"", ""content"": ""package com.example.banking.service;\n\nimport org.springframework.stereotype.Service;\nimport java.util.HashMap;\nimport java.util.Map;\n\n@Service\npublic class AccountServiceImpl implements AccountService {\n    private Map<String, Account> accounts = new HashMap<>();\n\n    @Override\n    public Account createAccount(Account account) {\n        if (accounts.containsKey(account.getId())) {\n            throw new RuntimeException(\""Account already exists!\"");\n        }\n        account.setBalance(0);\n        accounts.put(account.getId(), account);\n        return account;\n    }\n\n    @Override\n    public Account deposit(String id, double amount) {\n        if (!accounts.containsKey(id)) {\n            throw new RuntimeException(\""Account not found!\"");\n        }\n        Account account = accounts.get(id);\n        // Long Method starts here:\n        if (amount <= 0) {\n            throw new IllegalArgumentException(\""Deposit amount must be positive.\"");\n        }\n        double currentBalance = account.getBalance();\n        double newBalance = currentBalance + amount;\n        account.setBalance(newBalance);\n        // Long Method ends here:\n        return account;\n    }\n\n    @Override\n    public Account withdraw(String id, double amount) {\n        if (!accounts.containsKey(id)) {\n            throw new RuntimeException(\""Account not found!\"");\n        }\n        Account account = accounts.get(id);\n        // Long Method starts here:\n        if (amount <= 0) {\n            throw new IllegalArgumentException(\""Withdrawal amount must be positive.\"");\n        }\n        double currentBalance = account.getBalance();\n        if (currentBalance < amount) {\n            throw new RuntimeException(\""Insufficient funds!\"");\n        }\n        double newBalance = currentBalance - amount;\n        account.setBalance(newBalance);\n        // Long Method ends here:\n        return account;\n    }\n\n    @Override\n    public Account getAccountById(String id) {\n        if (!accounts.containsKey(id)) {\n            throw new RuntimeException(\""Account not found!\"");\n        }\n        return accounts.get(id);\n    }\n}""}, {""path"": ""src/main/java/com/example/banking/service/AccountService.java"", ""content"": ""package com.example.banking.service;\n\nimport com.example.banking.Account;\n\npublic interface AccountService {\n    Account createAccount(Account account);\n    Account deposit(String id, double amount);\n    Account withdraw(String id, double amount);\n    Account getAccountById(String id);\n}""}, {""path"": ""pom.xml"", ""content"": ""<?xml version=\""1.0\"" encoding=\""UTF-8\""?>\n<project xmlns=\""http://maven.apache.org/POM/4.0.0\""\n         xmlns:xsi=\""http://www.w3.org/2001/XMLSchema-instance\""\n         xsi:schemaLocation=\""http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\"">\n    <modelVersion>4.0.0</modelVersion>\n    <groupId>com.example</groupId>\n    <artifactId>banking</artifactId>\n    <version>1.0-SNAPSHOT</version>\n\n    <parent>\n        <groupId>org.springframework.boot</groupId>\n        <artifactId>spring-boot-starter-parent</artifactId>\n        <version>2.7.5</version>\n    </parent>\n\n    <dependencies>\n        <dependency>\n            <groupId>org.springframework.boot</groupId>\n            <artifactId>spring-boot-starter-web</artifactId>\n        </dependency>\n        <dependency>\n            <groupId>org.springframework.boot</groupId>\n            <artifactId>spring-boot-starter-test</artifactId>\n            <scope>test</scope>\n        </dependency>\n    </dependencies>\n\n    <build>\n        <plugins>\n            <plugin>\n                <groupId>org.springframework.boot</groupId>\n                <artifactId>spring-boot-maven-plugin</artifactId>\n            </plugin>\n        </plugins>\n    </build>\n</project>""}]","[{""path"": ""src/test/java/com/example/banking/service/AccountServiceImplTest.java"", ""content"": ""package com.example.banking.service;\n\nimport static org.junit.jupiter.api.Assertions.*;\nimport org.junit.jupiter.api.BeforeEach;\nimport org.junit.jupiter.api.Test;\nimport java.util.HashMap;\nimport java.util.Map;\n\nclass Account {\n    private String id;\n    private double balance;\n\n    public Account(String id, double balance) {\n        this.id = id;\n        this.balance = balance;\n    }\n\n    // Getters and setters omitted for brevity.\n}\n\npublic class AccountServiceImplTest {\n    private AccountService accountService;\n\n    @BeforeEach\n    void setUp() {\n        accountService = new AccountServiceImpl();\n        Account initialAccount = new Account(\""1\"", 100.0);\n        accountService.createAccount(initialAccount);\n    }\n\n    @Test\n    void testCreateAccount() {\n        Account newAccount = new Account(\""2\"", 0.0);\n        accountService.createAccount(newAccount);\n        Account retrievedAccount = accountService.getAccountById(\""2\"");\n        assertEquals(0.0, retrievedAccount.getBalance());\n    }\n\n    @Test\n    void testDeposit() {\n        Account updatedAccount = accountService.deposit(\""1\"", 50.0);\n        assertEquals(150.0, updatedAccount.getBalance());\n    }\n\n    @Test\n    void testWithdraw() {\n        Account updatedAccount = accountService.withdraw(\""1\"", 30.0);\n        assertEquals(70.0, updatedAccount.getBalance());\n    }\n\n    @Test\n    void testInvalidDeposit() {\n        Exception exception = assertThrows(IllegalArgumentException.class, () -> accountService.deposit(\""1\"", -10.0));\n        String expectedMessage = \""Deposit amount must be positive.\"";\n        assertTrue(exception.getMessage().contains(expectedMessage));\n    }\n\n    @Test\n    void testInvalidWithdrawal() {\n        Exception exception = assertThrows(IllegalArgumentException.class, () -> accountService.withdraw(\""1\"", -10.0));\n        String expectedMessage = \""Withdrawal amount must be positive.\"";\n        assertTrue(exception.getMessage().contains(expectedMessage));\n    }\n\n    @Test\n    void testInsufficientFunds() {\n        Exception exception = assertThrows(RuntimeException.class, () -> accountService.withdraw(\""1\"", 200.0));\n        String expectedMessage = \""Insufficient funds!\"";\n        assertTrue(exception.getMessage().contains(expectedMessage));\n    }\n}""}]","```java
package com.example.banking.service;

import org.springframework.stereotype.Service;
import java.util.HashMap;
import java.util.Map;

@Service
public class AccountServiceImpl implements AccountService {
    private Map<String, Account> accounts = new HashMap<>();

    @Override
    public Account createAccount(Account account) {
        if (accounts.containsKey(account.getId())) {
            throw new RuntimeException(""Account already exists!"");
        }
        account.setBalance(0);
        accounts.put(account.getId(), account);
        return account;
    }

    @Override
    public Account deposit(String id, double amount) {
        validateDepositWithdrawalParameters(amount, ""deposit"");
        Account account = getAccount(id);
        double newBalance = calculateNewBalance(account.getBalance(), amount, true);
        setAccountBalance(account, newBalance);
        return account;
    }

    @Override
    public Account withdraw(String id, double amount) {
        validateDepositWithdrawalParameters(amount, ""withdraw"");
        Account account = getAccount(id);
        if (account.getBalance() < amount) {
            throw new RuntimeException(""Insufficient funds!"");
        }
        double newBalance = calculateNewBalance(account.getBalance(), amount, false);
        setAccountBalance(account, newBalance);
        return account;
    }

    @Override
    public Account getAccountById(String id) {
        if (!accounts.containsKey(id)) {
            throw new RuntimeException(""Account not found!"");
        }
        return accounts.get(id);
    }

    private void validateDepositWithdrawalParameters(double amount, String operation) {
        if (amount <= 0) {
            throw new IllegalArgumentException(
                """" + operation.capitalize() + "" amount must be positive."");
        }
    }

    private Account getAccount(String id) {
        if (!accounts.containsKey(id)) {
            throw new RuntimeException(""Account not found!"");
        }
        return accounts.get(id);
    }

    private double calculateNewBalance(double currentBalance, double amount, boolean isDeposit) {
        return isDeposit ? currentBalance + amount : currentBalance - amount;
    }

    private void setAccountBalance(Account account, double newBalance) {
        account.setBalance(newBalance);
    }
}
```"
2026-02-07 19:39:28,Shopping,Refactor the 'calculateDiscounts' method in ProductService to improve readability without changing its behavior.,"[{""path"": ""src/main/java/com/shopping/inventory/ProductService.java"", ""content"": ""package com.shopping.inventory;\n\nimport java.util.List;\n\npublic class ProductService {\n    public double calculateDiscounts(List<Product> products, Customer customer) {\n        double totalDiscount = 0.0;\n        for (Product product : products) {\n            if (customer.isPremiumMember()) {\n                if (product.getPrice() > 100) {\n                    totalDiscount += product.getPrice() * 0.10; // 10% discount\n                } else {\n                    totalDiscount += product.getPrice() * 0.05; // 5% discount\n                }\n            } else {\n                if (product.getCategory().equals(\""Electronics\"") && product.getPrice() > 200) {\n                    totalDiscount += product.getPrice() * 0.15; // 15% discount for electronics over $200\n                }\n            }\n            if (customer.getId() == 42) { // special case customer ID\n                totalDiscount += 20; // fixed $20 discount\n            }\n        }\n        return totalDiscount;\n    }\n}\n\nclass Product {\n    private String name;\n    private double price;\n    private String category;\n\n    public String getName() { return name; }\n    public void setName(String name) { this.name = name; }\n\n    public double getPrice() { return price; }\n    public void setPrice(double price) { this.price = price; }\n\n    public String getCategory() { return category; }\n    public void setCategory(String category) { this.category = category; }\n}\n\nclass Customer {\n    private int id;\n    private boolean premiumMember;\n\n    public int getId() { return id; }\n    public void setId(int id) { this.id = id; }\n\n    public boolean isPremiumMember() { return premiumMember; }\n    public void setPremiumMember(boolean premiumMember) { this.premiumMember = premiumMember; }\n}""}, {""path"": ""src/main/java/com/shopping/inventory/ProductController.java"", ""content"": ""package com.shopping.inventory;\n\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.web.bind.annotation.GetMapping;\nimport org.springframework.web.bind.annotation.RequestMapping;\nimport org.springframework.web.bind.annotation.RestController;\n\nimport java.util.Arrays;\n\n@RestController\n@RequestMapping(\""/products\"")\npublic class ProductController {\n    private final ProductService productService;\n\n    @Autowired\n    public ProductController(ProductService productService) {\n        this.productService = productService;\n    }\n\n    @GetMapping(\""/discounts\"")\n    public double getDiscounts() {\n        Customer customer = new Customer();\n        customer.setId(42);\n        customer.setPremiumMember(true);\n\n        Product p1 = new Product();\n        p1.setName(\""Laptop\"");\n        p1.setPrice(250.0);\n        p1.setCategory(\""Electronics\"");\n\n        Product p2 = new Product();\n        p2.setName(\""Book\"");\n        p2.setPrice(30.0);\n        p2.setCategory(\""Books\"");\n\n        return productService.calculateDiscounts(Arrays.asList(p1, p2), customer);\n    }\n}""}]","[{""path"": ""src/test/java/com/shopping/inventory/ProductServiceTest.java"", ""content"": ""package com.shopping.inventory;\n\nimport org.junit.jupiter.api.Test;\nimport static org.junit.jupiter.api.Assertions.assertEquals;\n\nimport java.util.Arrays;\n\nclass ProductServiceTest {\n    @Test\n    void testCalculateDiscounts() {\n        ProductService productService = new ProductService();\n        Customer customer = new Customer();\n        customer.setId(42);\n        customer.setPremiumMember(true);\n\n        Product p1 = new Product();\n        p1.setName(\""Laptop\"");\n        p1.setPrice(250.0);\n        p1.setCategory(\""Electronics\"");\n\n        Product p2 = new Product();\n        p2.setName(\""Book\"");\n        p2.setPrice(30.0);\n        p2.setCategory(\""Books\"");\n\n        double discount = productService.calculateDiscounts(Arrays.asList(p1, p2), customer);\n        assertEquals(85.0, discount); // 25 from electronics + 50 fixed discount for premium member + 10 additional discount for special customer\n    }\n\n    @Test\n    void testCalculateDiscountsWithNonPremiumCustomer() {\n        ProductService productService = new ProductService();\n        Customer customer = new Customer();\n        customer.setId(1);\n        customer.setPremiumMember(false);\n\n        Product p1 = new Product();\n        p1.setName(\""TV\"");\n        p1.setPrice(300.0);\n        p1.setCategory(\""Electronics\"");\n\n        double discount = productService.calculateDiscounts(Arrays.asList(p1), customer);\n        assertEquals(45.0, discount); // 15% for electronics over $200\n    }\n}""}]","```java
// ProductService.java
package com.shopping.inventory;

import java.util.List;

public class ProductService {
    public double calculateDiscounts(List<Product> products, Customer customer) {
        double totalDiscount = 0.0;
        for (Product product : products) {
            totalDiscount += getPremiumMemberDiscount(product, customer);
            totalDiscount += getElectronicsDiscount(product);
            totalDiscount += getSpecialCustomerFixedDiscount(customer);
        }
        return totalDiscount;
    }

    private double getPremiumMemberDiscount(Product product, Customer customer) {
        if (customer.isPremiumMember()) {
            if (product.getPrice() > 100) {
                return product.getPrice() * 0.10; // 10% discount
            } else {
                return product.getPrice() * 0.05; // 5% discount
            }
        }
        return 0.0;
    }

    private double getElectronicsDiscount(Product product) {
        if (product.getCategory().equals(""Electronics"") && product.getPrice() > 200) {
            return product.getPrice() * 0.15; // 15% discount for electronics over $200
        }
        return 0.0;
    }

    private double getSpecialCustomerFixedDiscount(Customer customer) {
        if (customer.getId() == 42) { // special case customer ID
            return 20; // fixed $20 discount
        }
        return 0.0;
    }
}

class Product {
    private String name;
    private double price;
    private String category;

    public String getName() { return name; }
    public void setName(String name) { this.name = name; }

    public double getPrice() { return price; }
    public void setPrice(double price) { this.price = price; }

    public String getCategory() { return category; }
    public void setCategory(String category) { this.category = category; }
}

class Customer {
    private int id;
    private boolean premiumMember;

    public int getId() { return id; }
    public void setId(int id) { this.id = id; }

    public boolean isPremiumMember() { return premiumMember; }
    public void setPremiumMember(boolean premiumMember) { this.premiumMember = premiumMember; }
}
```"
2026-02-07 20:02:23,Banking,Refactor the 'AccountService.java' by identifying and resolving the 'Long Method' code smell. Ensure all observable behaviors remain unchanged.,"[{""path"": ""src/main/java/com/banking/demo/BankingApplication.java"", ""content"": ""package com.banking.demo;\n\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\n\n@SpringBootApplication\nclass BankingApplication {\n    public static void main(String[] args) {\n        SpringApplication.run(BankingApplication.class, args);\n    }\n}""}, {""path"": ""src/main/java/com/banking/demo/controller/AccountController.java"", ""content"": ""package com.banking.demo.controller;\n\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.web.bind.annotation.GetMapping;\nimport org.springframework.web.bind.annotation.PathVariable;\nimport org.springframework.web.bind.annotation.RestController;\nimport com.banking.demo.service.AccountService;\n\n@RestController\nclass AccountController {\n    private final AccountService accountService;\n\n    @Autowired\n    public AccountController(AccountService accountService) {\n        this.accountService = accountService;\n    }\n\n    @GetMapping(\""/account/{accountId}/balance\"")\n    public double getBalance(@PathVariable String accountId) {\n        return accountService.getBalance(accountId);\n    }\n}""}, {""path"": ""src/main/java/com/banking/demo/service/AccountService.java"", ""content"": ""package com.banking.demo.service;\n\nimport org.springframework.stereotype.Service;\n\n@Service\nclass AccountService {\n    public double getBalance(String accountId) {\n        if (accountId == null || accountId.isEmpty()) {\n            throw new IllegalArgumentException(\""Account ID cannot be null or empty\"");\n        }\n        // Simulated complex logic that should be refactored\n        double balance = 0.0;\n        for (int i = 0; i < 10000; i++) {\n            balance += Math.random();\n        }\n        if (balance > 5000) {\n            balance -= 2000;\n        } else {\n            balance += 3000;\n        }\n        for (int i = 0; i < 10000; i++) {\n            balance *= Math.random();\n        }\n        if (balance > 1000) {\n            return balance / 2;\n        } else {\n            return balance * 2;\n        }\n    }\n}""}]","[{""path"": ""src/test/java/com/banking/demo/service/AccountServiceTest.java"", ""content"": ""package com.banking.demo.service;\n\nimport static org.junit.jupiter.api.Assertions.assertEquals;\nimport static org.junit.jupiter.api.Assertions.assertThrows;\n\nimport org.junit.jupiter.api.Test;\nimport org.springframework.boot.test.context.SpringBootTest;\n\n@SpringBootTest\nclass AccountServiceTest {\n    private final AccountService accountService = new AccountService();\n\n    @Test\n    void getBalance_ValidAccount_ReturnsExpectedValue() {\n        double balance = accountService.getBalance(\""12345\"");\n        assertEquals(balance, expectedDoubleBalance(\""<expected value>\"")); // Replace with expected behavior\n    }\n\n    @Test\n    void getBalance_NullAccountId_ThrowsException() {\n        assertThrows(IllegalArgumentException.class, () -> accountService.getBalance(null));\n    }\n\n    private double expectedDoubleBalance(String description) {\n        return Math.random();\n    }\n}""}]","Refactor `AccountService.java` to eliminate the 'Long Method' code smell. The method should be broken down into smaller, focused methods that improve readability and maintainability.

```java
package com.banking.demo.service;

import org.springframework.stereotype.Service;

@Service
class AccountService {
    public double getBalance(String accountId) {
        validateAccountId(accountId);
        return calculateFinalBalance(calculateInitialBalance(), adjustBalanceBasedOnThreshold());
    }

    private void validateAccountId(String accountId) {
        if (accountId == null || accountId.isEmpty()) {
            throw new IllegalArgumentException(""Account ID cannot be null or empty"");
        }
    }

    private double calculateInitialBalance() {
        double balance = 0.0;
        for (int i = 0; i < 10000; i++) {
            balance += Math.random();
        }
        return applyMidAdjustment(balance);
    }

    private double applyMidAdjustment(double balance) {
        if (balance > 5000) {
            balance -= 2000;
        } else {
            balance += 3000;
        }
        for (int i = 0; i < 10000; i++) {
            balance *= Math.random();
        }
        return balance;
    }

    private boolean adjustBalanceBasedOnThreshold() {
        double initialAdjustment = calculateInitialBalance();
        return initialAdjustment > 1000;
    }

    private double calculateFinalBalance(double balance, boolean isAboveThreshold) {
        if (isAboveThreshold) {
            return balance / 2;
        } else {
            return balance * 2;
        }
    }
}
```

Ensure all tests pass after refactoring."
2026-02-09 12:08:28,Michael,Refactor an e-commerce inventory management Spring Boot application by identifying and resolving Large Class and Long Method code smells. The behavior of the application must remain unchanged.,"[{""path"": ""src/main/java/com/example/inventory/InventoryApplication.java"", ""content"": ""package com.example.inventory;\n\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\n\n@SpringBootApplication\npublic class InventoryApplication {\n    public static void main(String[] args) {\n        SpringApplication.run(InventoryApplication.class, args);\n    }\n}""}, {""path"": ""src/main/java/com/example/inventory/controller/InventoryController.java"", ""content"": ""package com.example.inventory.controller;\n\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.web.bind.annotation.*;\nimport com.example.inventory.service.InventoryService;\nimport java.util.List;\n\n@RestController\n@RequestMapping(\""/inventory\"")\npublic class InventoryController {\n    @Autowired\n    private InventoryService inventoryService;\n\n    @GetMapping\n    public List<String> getInventoryItems() {\n        return inventoryService.getAllItems();\n    }\n\n    @PostMapping\n    public String addItem(@RequestParam String item) {\n        return inventoryService.addItem(item);\n    }\n}""}, {""path"": ""src/main/java/com/example/inventory/service/InventoryService.java"", ""content"": ""package com.example.inventory.service;\n\nimport org.springframework.stereotype.Service;\nimport java.util.ArrayList;\nimport java.util.List;\n\n@Service\nclass InventoryService {\n    private final List<String> items = new ArrayList<>();\n\n    public List<String> getAllItems() {\n        // Long method example: multiple responsibilities\n        return processAndReturnAllItems(items);\n    }\n\n    public String addItem(String item) {\n        if (item == null || item.isEmpty()) {\n            throw new IllegalArgumentException(\""Item cannot be empty\"");\n        }\n        items.add(item);\n        return \""Item added successfully\"";\n    }\n\n    private List<String> processAndReturnAllItems(List<String> itemList) {\n        // Simulate processing\n        for (int i = 0; i < itemList.size(); i++) {\n            itemList.set(i, itemList.get(i).toUpperCase());\n        }\n        return itemList;\n    }\n}""}]","[{""path"": ""src/test/java/com/example/inventory/service/InventoryServiceTest.java"", ""content"": ""package com.example.inventory.service;\n\nimport org.junit.jupiter.api.*;\nimport static org.junit.jupiter.api.Assertions.*;\n\nclass InventoryServiceTest {\n    private InventoryService inventoryService = new InventoryService();\n\n    @Test\n    void testGetAllItems() {\n        List<String> items = inventoryService.getAllItems();\n        assertTrue(items.isEmpty());\n    }\n\n    @Test\n    void testAddItem_NormalCase() {\n        String result = inventoryService.addItem(\""item1\"");\n        assertEquals(\""Item added successfully\"", result);\n    }\n\n    @Test\n    void testAddItem_EmptyString() {\n        Exception exception = assertThrows(IllegalArgumentException.class, () -> {\n            inventoryService.addItem(\""\"");\n        });\n        String expectedMessage = \""Item cannot be empty\"";\n        assertTrue(exception.getMessage().contains(expectedMessage));\n    }\n}""}]","# Reference Solution

## InventoryService.java (Refactored)
```java
package com.example.inventory.service;

import org.springframework.stereotype.Service;
import java.util.ArrayList;
import java.util.List;

@Service
class InventoryService {
    private final List<String> items = new ArrayList<>();

    public List<String> getAllItems() {
        return processAndReturnAllItems(items);
    }

    public String addItem(String item) {
        validateItem(item);
        items.add(item);
        return ""Item added successfully"";
    }

    private void validateItem(String item) {
        if (item == null || item.isEmpty()) {
            throw new IllegalArgumentException(""Item cannot be empty"");
        }
    }

    private List<String> processAndReturnAllItems(List<String> itemList) {
        return itemList.stream().map(String::toUpperCase).toList();
    }
}
```
"
2026-02-09 12:50:53,Michael ,"Refactor the provided Spring Boot project to address code smells. Specifically, identify and refactor instances of Primitive Obsession and Long Method within the InventoryService class. Ensure that your refactoring does not alter the observable behavior of the application.","[{""path"": ""src/main/java/com/example/inventory/InventoryApplication.java"", ""content"": ""package com.example.inventory;\n\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\n\n@SpringBootApplication\npublic class InventoryApplication {\n\n    public static void main(String[] args) {\n        SpringApplication.run(InventoryApplication.class, args);\n    }\n}""}, {""path"": ""src/main/java/com/example/inventory/controller/InventoryController.java"", ""content"": ""package com.example.inventory.controller;\n\nimport com.example.inventory.service.InventoryService;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.web.bind.annotation.*;\n\n@RestController\n@RequestMapping(\""/inventory\"")\npublic class InventoryController {\n    \n    @Autowired\n    private InventoryService inventoryService;\n\n    @GetMapping(\""/{productId}\"")\n    public String getProduct(@PathVariable String productId) {\n        return inventoryService.getProduct(productId);\n    }\n\n    @PostMapping()\n    public String updateProduct(@RequestParam String productId, @RequestParam int quantity) {\n        return inventoryService.updateProduct(productId, quantity);\n    }\n}""}, {""path"": ""src/main/java/com/example/inventory/service/InventoryService.java"", ""content"": ""package com.example.inventory.service;\n\nimport org.springframework.stereotype.Service;\n\n@Service\npublic class InventoryService {\n    \n    public String getProduct(String productId) {\n        // Simulated database retrieval logic\n        if (productId.equals(\""prod123\"")) {\n            return \""Product 123 - Quantity: 50\"";\n        } else if (productId.equals(\""prod456\"")) {\n            return \""Product 456 - Quantity: 30\"";\n        }\n        return \""Product Not Found\"";\n    }\n\n    public String updateProduct(String productId, int quantity) {\n        // Simulated database update logic\n        StringBuilder response = new StringBuilder();\n        if (productId.equals(\""prod123\"") && quantity > 0) {\n            response.append(\""Updated Product 123 to Quantity: \"").append(quantity);\n        } else if (productId.equals(\""prod456\"") && quantity > 0) {\n            response.append(\""Updated Product 456 to Quantity: \"").append(quantity);\n        } else {\n            response.append(\""Invalid Product ID or Quantity\"");\n        }\n        return response.toString();\n    }\n}""}]","[{""path"": ""src/test/java/com/example/inventory/service/InventoryServiceTest.java"", ""content"": ""package com.example.inventory.service;\n\nimport org.junit.jupiter.api.Test;\nimport static org.junit.jupiter.api.Assertions.*;\n\npublic class InventoryServiceTest {\n\n    private final InventoryService inventoryService = new InventoryService();\n\n    @Test\n    public void testGetExistingProduct() {\n        String result = inventoryService.getProduct(\""prod123\"");\n        assertEquals(\""Product 123 - Quantity: 50\"", result);\n    }\n\n    @Test\n    public void testGetNonExistingProduct() {\n        String result = inventoryService.getProduct(\""prod999\"");\n        assertEquals(\""Product Not Found\"", result);\n    }\n\n    @Test\n    public void testUpdateValidProduct() {\n        String result = inventoryService.updateProduct(\""prod123\"", 60);\n        assertEquals(\""Updated Product 123 to Quantity: 60\"", result);\n    }\n\n    @Test\n    public void testUpdateInvalidProduct() {\n        String result = inventoryService.updateProduct(\""prod999\"", 10);\n        assertEquals(\""Invalid Product ID or Quantity\"", result);\n    }\n}""}]","```java
package com.example.inventory.service;

import org.springframework.stereotype.Service;

@Service
public class InventoryService {
    
    public String getProduct(String productId) {
        return findProduct(productId).orElse(""Product Not Found"").toString();
    }

    public String updateProduct(String productId, int quantity) {
        if (quantity <= 0) {
            return ""Invalid Product ID or Quantity"";
        }
        return ""Updated "" + getProduct(productId) + "" to Quantity: "" + quantity;
    }

    private Optional<String> findProduct(String productId) {
        switch (productId) {
            case ""prod123"":
                return Optional.of(""Product 123 - Quantity: 50"");
            case ""prod456"":
                return Optional.of(""Product 456 - Quantity: 30"");
            default:
                return Optional.empty();
        }
    }
}
```"
2026-02-09 13:16:27,Library management,Refactor the given Java Spring Boot project by identifying and removing duplicate code in the service layer. Ensure all JUnit tests pass both before and after refactoring.,single,"{""status"": ""success"", ""message"": ""Exercise generated and saved to C:\\Users\\jeffr\\code-llamas\\backend\\src\\codellamas_backend\\generated_exercises\\Library_management_0902_1627"", ""data"": {""problem_description"": ""Refactor the given Java Spring Boot project by identifying and removing duplicate code in the service layer. Ensure all JUnit tests pass both before and after refactoring."", ""project_files"": [{""path"": ""src/main/java/com/library/management/LibraryManagementApplication.java"", ""content"": ""package com.library.management;\n\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\n\n@SpringBootApplication\npublic class LibraryManagementApplication {\n    public static void main(String[] args) {\n        SpringApplication.run(LibraryManagementApplication.class, args);\n    }\n}""}, {""path"": ""src/main/java/com/library/management/controller/BookController.java"", ""content"": ""package com.library.management.controller;\n\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.web.bind.annotation.*;\nimport com.library.management.service.BookService;\n\n@RestController\n@RequestMapping(\""/books\"")\npublic class BookController {\n    @Autowired\n    private BookService bookService;\n\n    @GetMapping({\""\"", \""/{id}\""})\n    public String checkBookAvailability(@PathVariable(required = false) Integer id) {\n        if (id != null) {\n            return bookService.isAvailableById(id);\n        } else {\n            return bookService.isAvailable();\n        }\n    }\n}""}, {""path"": ""src/main/java/com/library/management/service/BookService.java"", ""content"": ""package com.library.management.service;\n\nimport org.springframework.stereotype.Service;\n\n@Service\npublic class BookService {\n    public String isAvailable() {\n        return checkAvailability(\""All Books\"", 5);\n    }\n\n    public String isAvailableById(Integer id) {\n        return checkAvailability(\""Book with ID \"" + id, 3);\n    }\n\n    private String checkAvailability(String context, int threshold) {\n        // Simulated logic for checking availability\n        if (threshold > 2) {\n            return context + \"" is available\"";\n        } else {\n            return context + \"" is not available\"";\n        }\n    }\n}""}], ""test_files"": [{""path"": ""src/test/java/com/library/management/service/BookServiceTest.java"", ""content"": ""package com.library.management.service;\n\nimport org.junit.jupiter.api.Test;\nimport static org.junit.jupiter.api.Assertions.*;\n\nclass BookServiceTest {\n\n    @Test\n    void testAvailability() {\n        BookService service = new BookService();\n        assertEquals(\""All Books is available\"", service.isAvailable());\n    }\n\n    @Test\n    void testSpecificBookAvailability() {\n        BookService service = new BookService();\n        assertEquals(\""Book with ID 1 is available\"", service.isAvailableById(1));\n    }\n\n    @Test\n    void testSpecificBookNotAvailable() {\n        BookService service = new BookService();\n        assertEquals(\""Book with ID 2 is not available\"", service.isAvailableById(2));\n    }\n}""}], ""reference_solution_markdown"": ""# Reference Solution for Refactoring Duplicate Code\n\n## Original Code\n```java\npackage com.library.management.service;\n\nimport org.springframework.stereotype.Service;\n\n@Service\npublic class BookService {\n    public String isAvailable() {\n        return checkAvailability(\""All Books\"", 5);\n    }\n\n    public String isAvailableById(Integer id) {\n        return checkAvailability(\""Book with ID \"" + id, 3);\n    }\n\n    private String checkAvailability(String context, int threshold) {\n        // Simulated logic for checking availability\n        if (threshold > 2) {\n            return context + \"" is available\"";\n        } else {\n            return context + \"" is not available\"";\n        }\n    }\n}\n```\n## Refactored Code\n```java\npackage com.library.management.service;\n\nimport org.springframework.stereotype.Service;\n\n@Service\npublic class BookService {\n    public String isAvailable() {\n        return checkAvailability(\""All Books\"", 5);\n    }\n\n    public String isAvailableById(Integer id) {\n        int threshold = calculateThreshold(id);\n        return checkAvailability(\""Book with ID \"" + id, threshold);\n    }\n\n    private String checkAvailability(String context, int threshold) {\n        // Simulated logic for checking availability\n        if (threshold > 2) {\n            return context + \"" is available\"";\n        } else {\n            return context + \"" is not available\"";\n        }\n    }\n\n    private int calculateThreshold(Integer id) {\n        return id != null && id % 2 == 0 ? 3 : 4;\n    }\n}\n```""}, ""maven_verification"": {""enabled"": false}}"
