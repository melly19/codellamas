generate_exercise:
   description: >
      INPUTS:
      - {topic}: The business domain for the Spring Boot project
      - {code_smell}: A specific code smell that will be tested for this exercise

      SECTION 1: PROBLEM GENERATION
      1. Generate a small, realistic Java Spring Boot project based on {topic}.
      2. Intentionally include the code smell {code_smell} in a way that students
         are expected to identify and refactor.
      3. The code should reflect common student-level mistakes rather than
         advanced architectural flaws.
      4. Limit scope:
         - 2â€“4 classes
         - Controller and service layers only
         - No external APIs or databases (use in-memory data).
      5. Clearly state:
         - The refactoring task
         - Constraints (behavior must not change)

      SECTION 2: TEST CASE GENERATION
      1. Generate JUnit 5 test cases that define the correct external behavior.
      2. Tests must:
         - Pass with the original implementation
         - Pass with a correct refactoring.
      3. Include:
         - At least one normal case
         - At least one edge or invalid input case.
      4. Use readable test names and simple assertions suitable for advanced students.

      SECTION 3: REFERENCE SOLUTION GENERATION
      1. Provide a recommended refactored solution that removes {code_smell}.
      2. Show:
         - The original (smelly) implementation
         - The refactored implementation.
      3. Refactoring must:
         - Preserve behavior
         - Improve readability and structure
         - Follow clean code principles taught at undergraduate level.
      4. Ensure all provided tests pass.

      OUTPUT FORMAT:
      1. Problem description and constraints
      2. Original code (with code smell)
      3. JUnit 5 test cases
      4. Recommended refactored solution
   expected_output: >
      A complete Spring Boot refactoring exercise with tests and a reference solution,
      suitable for advanced university students.
   agent: general_agent

review_solution:
   description: >
      INPUTS:
      - {problem_description}: The original exercise description
      - {original_code}: The initial code containing the code smell
      - {tests}: JUnit 5 test cases defining expected behavior
      - {student_solution}: The student's refactored code submission

      SECTION 1: FUNCTIONAL CORRECTNESS CHECK
      1. Determine whether the student solution preserves the intended behavior.
      2. Reason about whether all provided tests would pass.
      3. Clearly state any functional regressions or violations.

      SECTION 2: CODE QUALITY REVIEW
      1. Assess whether the targeted code smell has been adequately addressed.
      2. Evaluate the solution based on clean code principles:
         - Readability
         - Separation of concerns
         - Appropriate abstraction.
      3. Accept multiple valid solutions if they adhere to good refactoring practices.

      SECTION 3: FEEDBACK GENERATION
      1. Provide concise, constructive feedback covering:
         - What was done well
         - What could be improved.
      2. Reference specific files or constructs where relevant.
      3. Avoid teaching step-by-step refactoring; focus on review and evaluation.

      SECTION 4: SUMMARY ASSESSMENT
      1. Provide a brief overall assessment of the submission.
      2. Clearly indicate whether the solution is acceptable.

      OUTPUT FORMAT:
      1. Functional correctness assessment
      2. Code quality review
      3. Actionable feedback
      4. Overall verdict
   expected_output: >
      An objective review of the student's refactoring, covering correctness,
      code quality, and adherence to refactoring principles.
   agent: general_agent
